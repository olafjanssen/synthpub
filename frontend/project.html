<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SynthPub - Project Topics</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
</head>
<body>

    <div class="container mt-3 pt-3">
        <div id="top-cards">
            <div class="card top-card">
                <div class="card-header">
                    <img src="img/dpbtse_logo.png" alt="Card cap" class="card-img-top">
                </div>
                <div class="card-body">
                    <h4 class="card-title"><span>S</span><span>Y</span><span>N</span><span>T</span><span>H</span><span>P</span><span>U</span><span>B</span></h4>
                    <h6 class="card-title"><span>I</span><span>N</span><span>F</span><span>O</span><span>R</span><span>M</span><span>A</span><span>T</span><span>I</span><span>O</span><span>N</span><span>&nbsp;</span><span>C</span><span>U</span><span>L</span><span>T</span><span>U</span><span>R</span><span>E</span></h6>
                </div>
                <div class="card-footer">
                    <p class="card-text">&nbsp;</p>
                    <a href="/" class="stretched-link">&nbsp;</a>
                </div>
            </div>
            <div class="card top-card new-project-card">
                <div class="card-header">
                </div>
                <div class="card-body">
                    <h5 class="card-title" id="project-title">Project Title</h5>
                </div>
                <div class="card-footer">
                    <p class="card-text">&nbsp;</p>
                </div>
            </div>
            <!-- New Topic Card -->
            <div class="card top-card topic-card new-project-card" data-bs-toggle="modal" data-bs-target="#createTopicModal">
                <div class="card-header">
                </div>
                <div class="card-body">
                    <h5 class="card-title">Create<br>New Topic</h5>
                </div>
                <div class="card-footer">
                    <p class="card-text">&nbsp;</p>
                </div>
            </div>
            <div class="card top-card topic-card">
                <div class="card-header">
                    <div class="card-img-top"></div>
                </div>
                <div class="card-body">
                    <h5 class="card-title">latest topic</h5>
                </div>
                <div class="card-footer">
                    <p class="card-text">&nbsp;</p>
                </div>
            </div>
            <div class="card top-card topic-card">
                <div class="card-header">
                    <div class="card-img-top"></div>
                </div>
                <div class="card-body">
                    <h5 class="card-title">oldest topic</h5>
                </div>
                <div class="card-footer">
                    <p class="card-text">&nbsp;</p>
                </div>
            </div>
            <div class="card top-card topic-card">
                <div class="card-header">
                    <div class="card-img-top"></div>
                </div>
                <div class="card-body">
                    <h5 class="card-title">most active topic</h5>
                </div>
                <div class="card-footer">
                    <p class="card-text">&nbsp;</p>
                </div>
            </div>
        </div>        
        <div id="topics-list">
            <!-- Topics will be inserted here -->
        </div>
    </div>

    <!-- Create Topic Modal -->
    <div class="modal fade" id="createTopicModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Create New Topic</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="createTopicForm">
                        <div class="mb-3">
                            <label for="topicName" class="form-label">Topic Name</label>
                            <input type="text" class="form-control" id="topicName" required>
                        </div>
                        <div class="mb-3">
                            <label for="topicDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="topicDescription" rows="3" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="thumbnailUrl" class="form-label">Thumbnail URL</label>
                            <input type="url" class="form-control" id="thumbnailUrl" placeholder="https://example.com/image.jpg">
                            <small class="form-text text-muted">Leave empty to use auto-generated thumbnail</small>
                        </div>
                        <div class="mb-3">
                            <label for="promptSelect" class="form-label">Article Generation Prompt</label>
                            <select class="form-select" id="promptSelect">
                                <option value="">Default prompt</option>
                                <!-- Prompt options will be loaded dynamically -->
                            </select>
                            <small class="form-text text-muted">Optional. Leave as default to use standard article generation</small>
                        </div>
                        <div class="mb-3">
                            <label for="feedUrls" class="form-label">Feed URLs</label>
                            <div id="feedUrlsContainer">
                                <div class="input-group mb-2">
                                    <input type="url" class="form-control feed-url" placeholder="https://example.com/feed">
                                    <button type="button" class="btn btn-outline-danger remove-feed">×</button>
                                </div>
                            </div>
                            <button type="button" class="btn btn-outline-secondary btn-sm" id="addFeedBtn">
                                Add Feed URL
                            </button>
                        </div>
                        <div class="mb-3">
                            <label for="publishUrls" class="form-label">Publishing Chains</label>
                            <div id="publishUrlsContainer">
                                <div class="chain-container mb-3">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <label class="form-label mb-0">Chain Items</label>
                                        <button type="button" class="btn btn-outline-danger btn-sm remove-chain">Remove Chain</button>
                                    </div>
                                    <div class="chain-items-container">
                                        <div class="input-group mb-2">
                                            <input type="text" class="form-control chain-item" placeholder="Chain item">
                                            <button type="button" class="btn btn-outline-danger remove-chain-item">×</button>
                                        </div>
                                    </div>
                                    <button type="button" class="btn btn-outline-secondary btn-sm add-chain-item">
                                        Add Chain Item
                                    </button>
                                </div>
                            </div>
                            <button type="button" class="btn btn-outline-secondary btn-sm" id="addPublishBtn">
                                Add Publishing Chain
                            </button>
                            <small class="form-text text-muted">Create chains of publishing steps separated by | in the backend</small>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="createTopicBtn">Create Topic</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Topic Modal -->
    <div class="modal fade" id="editTopicModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Edit Topic</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="editTopicForm">
                        <input type="hidden" id="editTopicId">
                        <div class="mb-3">
                            <label for="editTopicName" class="form-label">Topic Name</label>
                            <input type="text" class="form-control" id="editTopicName" required>
                        </div>
                        <div class="mb-3">
                            <label for="editTopicDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="editTopicDescription" rows="3" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="editThumbnailUrl" class="form-label">Thumbnail URL</label>
                            <input type="url" class="form-control" id="editThumbnailUrl" placeholder="https://example.com/image.jpg">
                            <small class="form-text text-muted">Leave empty to use auto-generated thumbnail</small>
                        </div>
                        <div class="mb-3">
                            <label for="editPromptSelect" class="form-label">Article Generation Prompt</label>
                            <select class="form-select" id="editPromptSelect">
                                <option value="">Default prompt</option>
                                <!-- Prompt options will be loaded dynamically -->
                            </select>
                            <small class="form-text text-muted">Optional. Leave as default to use standard article generation</small>
                        </div>
                        <div class="mb-3">
                            <label for="editFeedUrls" class="form-label">Feed URLs</label>
                            <div id="editFeedUrlsContainer"></div>
                        </div>
                        <div class="mb-3">
                            <label for="editPublishUrls" class="form-label">Publishing Chains</label>
                            <div id="editPublishUrlsContainer"></div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer justify-content-between">
                    <button type="button" class="btn btn-danger remove-article">Remove Topic</button>
                    <div>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-primary" id="updateTopicBtn">Save Changes</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Topic card template -->
    <template id="topic-template">
        <div class="card topic-card">
            <div class="card-header">
                <img class="card-img-top topic-img" src="/img/bg/bg-1.png" alt="Topic">
                <div class="card-header-buttons">
                    <button class="btn btn-link btn-sm p-0 me-2 publish-article" title="Publish Article">
                        <i class="bi bi-cloud-upload"></i>
                    </button>
                    <button class="btn btn-link btn-sm p-0 me-2 update-article" title="Update Article">
                        <i class="bi bi-play-circle"></i>
                    </button>
                    <button class="btn btn-link btn-sm p-0 edit-article" data-bs-toggle="modal" data-bs-target="#editTopicModal" title="Edit Topic">
                        <i class="bi bi-pencil"></i>
                    </button>
                </div>
            </div>
            <div class="card-body">
                <h5 class="card-title topic-name">&nbsp;</h5>
            </div>
            <div class="card-footer">
                <p class="card-text description">&nbsp;</p>
                <a class="stretched-link view-article">&nbsp;</a>
            </div>
        </div>
    </template>

    <template id="empty-topic-template">
        <div class="card empty-card">
            <div class="card-header">
                <div class="card-img-top"></div>
            </div>
            <div class="card-body">
                <h5 class="card-title">&nbsp;</h5>
            </div>
            <div class="card-footer">
                <p class="card-text">&nbsp;</p>
            </div>
        </div>
    </template>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/project.js"></script>
</body>
</html> 